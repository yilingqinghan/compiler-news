# 编译器周报 2025-08-11 ~ 2025-08-18

## 本周综述

### 总体

本周，我们在编译器周报中关注到了多个提交的综合情况。这些提交不仅涉及代码修改和问题修复，也包括功能性的改进和完善。在这些贡献中，有一些值得特别提到。

首先，在 contrib/check-MAINTAINERS.py 脚本上进行的一项修正解决了其存在的错误排序问题，使得脚本能够基于姓氏、名字、bugzilla handle 和邮箱地址正确地排列贡献者信息。

其次，针对 LLVM 项目中的 mlir[doc] 提交，一个与 MVVM（Model-View-ViewModel）实现相关的新功能被引入。该提交解决了在使用 TCA（Target Computation Architecture）模式进行 MVVM 实现时的一个简单问题：即如何在 ViewModel 中接收全局状态的变更通知。

此外，在 clang-tidy 子项中移除了一个已弃用的 py2 条件。这一改动有助于优化编译器，使其兼容更多的 Python 版本。同时修复了一条关于继承成员初始化的错误提示，表明 LLVM 项目对确保代码质量做出了持续改进。

另外一项提交涉及系统头文件中的节点匹配问题解决，新增了一个名为 isInSystemHeader 的函数，并引入了模板来获取不同类型的定位信息。这有助于在处理特定条件下进行优化。

最后，在 clang [字节码] 部分，对一个与公式析构函数调用相关的错误进行了修正。这样的修复可以进一步提升编译器的性能和准确性。

### 细分

1. contrib/check-MAINTAINERS.py 提交解决了其脚本中基于姓氏、名字、bugzilla handle 和邮箱地址进行贡献排序的问题，避免了混乱状态。
2. mlir[doc] 提供了一个新功能以解决 MVVM 实现中的问题，该功能通过一个简单的机制允许在 ViewModel 中订阅全局状态的变化通知。
3. clang-tidy 提交移除了一个对 Python 2 的依赖条件，这是向多版本兼容迈出的重要一步；同时修复了关于继承成员初始化的错误提示，这有助于提高代码质量并减少潜在的bug。
4. 系统头文件中的节点匹配问题得到了解决，通过增加一个新的函数和使用模板来获取定位信息的方式改善了系统的稳定性与健壮性。
5. 在处理等于条件时解决了 u1 类型下的截断问题，这在保证正确性和避免运行时错误方面有重要意义。

### 展望

对于未来的改进和发展方向，我们期望看到更多针对用户界面、代码质量和系统兼容性的优化。同时也在研究如何更好地支持新语言特性，并进一步提升编译器的性能和安全性。此外，对现有功能的维护与完善仍然是一个重要任务，这需要细致入微的关注和持续的努力。

通过这些改进，我们的目标是继续为用户提供一个更加高效、稳定且易于使用的产品，并不断提高 LLVM 项目的整体质量。

## 封面 Top

- **解决 contrib/check-MAINTAINERS.py 脚本中的贡献排序问题**    [原文](https://inbox.sourceware.org/gcc-patches/aKG2w6dK1wMB85oV@localhost.localdomain/)
- **mlir[doc] 修改代码块**    [原文](https://github.com/llvm/llvm-project/commit/a66d8f62e6a6e64c77322533e4f6f2a2a5884aa2)
- **一个观察另一个视图模型状态的功能（用于MVVM实现）**    [原文](https://forums.swift.org/t/one-feature-observing-state-of-another-for-mvvm-implementation/81680)
- **clang-tidy[NFC] 移除 clang-tidy 脚本中的 py2 条件**    [原文](https://github.com/llvm/llvm-project/commit/66a2d1b7580aab8ac2c171647c39fd85fe711013)
- **修复继承成员的 'cppcoreguidelines-prefer-member-initializer' 错误提示**    [原文](https://github.com/llvm/llvm-project/commit/326d749a368a842e71fd0d4cd7bb97c6d9f52f3e)
- **系统头文件中的节点匹配避免**    [原文](https://github.com/llvm/llvm-project/commit/bd77e9acf0e86a46379e1780dd58a787a7ee78f5)
- **处理等于条件中的截断 u1 条件**    [原文](https://github.com/llvm/llvm-project/commit/5ae8a9b8cee3d4477fdec107a3ab29b633ec4f9f)
- **clang [字节码] 公式析构函数调用修正**    [原文](https://github.com/llvm/llvm-project/commit/e44784fb44bd00acc0ecd25537a359c3a1df8f17)

## LLVM 专区

- **mlir[doc] 修改代码块**    [原文](https://github.com/llvm/llvm-project/commit/a66d8f62e6a6e64c77322533e4f6f2a2a5884aa2)
- **clang-tidy[NFC] 移除 clang-tidy 脚本中的 py2 条件**    [原文](https://github.com/llvm/llvm-project/commit/66a2d1b7580aab8ac2c171647c39fd85fe711013)
- **修复继承成员的 'cppcoreguidelines-prefer-member-initializer' 错误提示**    [原文](https://github.com/llvm/llvm-project/commit/326d749a368a842e71fd0d4cd7bb97c6d9f52f3e)
- **系统头文件中的节点匹配避免**    [原文](https://github.com/llvm/llvm-project/commit/bd77e9acf0e86a46379e1780dd58a787a7ee78f5)
- **处理等于条件中的截断 u1 条件**    [原文](https://github.com/llvm/llvm-project/commit/5ae8a9b8cee3d4477fdec107a3ab29b633ec4f9f)
- **clang [字节码] 公式析构函数调用修正**    [原文](https://github.com/llvm/llvm-project/commit/e44784fb44bd00acc0ecd25537a359c3a1df8f17)
- **[TableGen][DecoderEmitter] 提升冲突信息的输出**    [原文](https://github.com/llvm/llvm-project/commit/ea4325f174baca7d12e128db4f9f3b41a918da67)
- **[TableGen] Make a function static (NFC)**    [原文](https://github.com/llvm/llvm-project/commit/05f1673e7569da0762d2a5d890ca4860760dad34)
- **TableGen[DecoderEmitter] 输出早期冲突**    [原文](https://github.com/llvm/llvm-project/commit/05827e7ccb4e1295648e38b11ebdbb8fd817177b)
- **clang: 修改OMPClauseProfiler方法名中的拼写错误**    [原文](https://github.com/llvm/llvm-project/commit/3d83dbb73610c6cfb1b67252bd2d519a0aa5e308)
- **[TableGen][DecoderEmitter] 缩短 Filters 向量的生命周期至 NFC (NFC)**    [原文](https://github.com/llvm/llvm-project/commit/fc6024d8959cdb82e5421787882288e26ee728bc)
- **clang-format更新OneLineFormatOffRegex选项，修正getcpu标准及增强CI日志统计功能**    [原文](https://github.com/llvm/llvm-project/commit/ee51f35993d9623563551f9bb9521824992967b6)
- **libc++ flat_set 缺少特性宏**    [原文](https://github.com/llvm/llvm-project/commit/f3008c11406440959f6fc2120dd2117df6fa11ce)
- **RISC-V: 添加 missed DONE 以解决 vx 结合模式 [NFC]**    [原文](https://github.com/gcc-mirror/gcc/commit/756f771f58f79406a08b6d574939b70d895bb613)
- **M68k 添加 PCD 地址模式的 anyext 行为**    [原文](https://github.com/llvm/llvm-project/commit/bc3754de0aed44147e64b99414ecb06f84ab1a91)
- **移除对llvm-project-tests.yml的调用到spirv-tests.yml**    [原文](https://github.com/llvm/llvm-project/commit/1f5047e43092f39a60a0ddba921610c2ab00897e)
- **移除declareCommon函数中的未使用参数IsTarget**    [原文](https://github.com/llvm/llvm-project/commit/2cedb286b8a37a3c6f09ac394b5e95413baac287)
- **MCSymbol: 移除AMDGPU特有的Kind::TargetCommon并重命名SymContents为kind**    [原文](https://github.com/llvm/llvm-project/commit/aa96e20dcefa7d73229c98a7d2727696ff949459)
- **TableGen[解码发射器] 添加工作于范围的帮助者（NFC）**    [原文](https://github.com/llvm/llvm-project/commit/7bb73455f76c8ce3b470fb931daa68a33ec79c34)
- **为 #153946 添加测试**    [原文](https://github.com/llvm/llvm-project/commit/73775a0f2749d0cc8b8877bf34ebb3534a2e7913)
- **感兴趣讨论MLIR中更丰富TableGen描述的特性**    [原文](https://discourse.llvm.org/t/survey-interested-in-discussing-richer-tablegen-descriptions-in-mlir/87959)
- **clang[test] 调试信息测试的位置**    [原文](https://discourse.llvm.org/t/clang-test-location-of-clang-debug-info-tests/87958)
- **MLIR GPU CUDA sm90 gemm_pred_f32_f16_f16_128x128x128.mlir集成测试失败及 matmul.py 调试信息**    [原文](https://discourse.llvm.org/t/how-to-start-the-integrated-test-of-nvgpu-dialect/87950)
- **Clang-tidy misc-use-anonymous-namespace**    [原文](https://discourse.llvm.org/t/clang-tidy-misc-use-anonymous-namespace/87947)
- **LLVM 21.1.0-rc3 发布**    [原文](https://github.com/llvm/llvm-project/releases/tag/llvmorg-21.1.0-rc3)
- **如何调试PDL模式匹配**    [原文](https://discourse.llvm.org/t/how-to-debug-pdl-pattern-matching/87940)
- **MILR中全量转换与部分转换最佳设计模式**    [原文](https://discourse.llvm.org/t/best-design-pattern-for-toggle-full-vs-partial-dialect-conversion-in-milr/87926)
- **Clang vs GCC ffp-contract 默认值对基准测试的影响**    [原文](https://discourse.llvm.org/t/impact-of-ffp-contract-defaults-on-benchmarking/87906)
- **传递 -fsanitize-trap=<...> 而未关联 -fsanitize=<...> 时发出警告**    [原文](https://discourse.llvm.org/t/rfc-emit-a-warning-when-fsanitize-trap-is-passed-without-associated-fsanitize/87893)
- **RISC-V LLVM 同步会议更新**    [原文](https://discourse.llvm.org/t/risc-v-llvm-sync-up-call-august-14th-2025/87891)
- **RFC: 支持cheriot目标三元组作为riscv32子架构**    [原文](https://discourse.llvm.org/t/rfc-support-cheriot-target-triple-as-subarchitecture-of-riscv32/87883)
- **RFC: 延伸 LLVM 编译器基础设施中的内存效应以改进循环不变量代码移动并通过引入新 MemInit 效应提高性能**    [原文](https://discourse.llvm.org/t/rfc-extending-memory-effects-and-improving-loop-invariant-code-motion-via-a-new-meminit-effect/87873)
- **PSA：在Python中启用自动位置推断**    [原文](https://discourse.llvm.org/t/psa-automatic-location-inference-in-python/87871)
- **线程安全分析与std::weak_ptr**    [原文](https://discourse.llvm.org/t/thread-safety-analysis-and-std-weak-ptr/87864)
- **即将到来的工作会议安排**    [原文](https://discourse.llvm.org/t/my-upcoming-availability/87851)
- **LLVM 21.1.0-rc3 发布**    [原文](https://discourse.llvm.org/t/llvm-21-1-0-rc3-released/87826)
- **Error: 拾ialect 'xxx' 提供了无类型的解析钩子**    [原文](https://discourse.llvm.org/t/error-dialect-xxx-provides-no-type-parsing-hook/87825)
- **使用GOTPCREL重新定位项处理personality和typeinfo eh_frame引用**    [原文](https://discourse.llvm.org/t/using-gotpcrel-relocations-for-personality-and-typeinfo-eh-frame-references/87820)
- **LLVM 周报 #606（2025年8月11日）**    [原文](https://llvmweekly.org/issue/606)

## GCC

- **解决 contrib/check-MAINTAINERS.py 脚本中的贡献排序问题**    [原文](https://inbox.sourceware.org/gcc-patches/aKG2w6dK1wMB85oV@localhost.localdomain/)
- **兴趣设置喷洒产品**    [原文](https://inbox.sourceware.org/gcc-patches/5ae86caa.5e0.198b673b7bb.Coremail.bessiex@vip.163.com/)
- **[补丁] testsuite: 修复 PR108080 测试用例对于某些目标 [PR121396]**    [原文](https://inbox.sourceware.org/gcc-patches/aKFI6Rs9TJ738ig-@Thaum.localdomain/)
- **[PATCH 2/3] ira: 紧耦合融合指令对的输出分配序号**    [原文](https://inbox.sourceware.org/gcc-patches/e685c33c-9539-417f-b5c2-8b0ee979aa74@gmail.com/)
- **IRA: 将融合指令对的目标分配码绑定在一起**    [原文](https://github.com/gcc-mirror/gcc/commit/07a0baa7609a5a78d8b4a3c17897768fb2119605)
- **RISC-V 编译器漏洞修复：扩展条件块匹配**    [原文](https://github.com/gcc-mirror/gcc/commit/14b15a9a473fc69b0251e625c397e70c396f0c0c)
- **RISC-V: 固件匹配修复**    [原文](https://inbox.sourceware.org/gcc-patches/0c26667e-f5eb-4ab9-a4a6-8428ea598055@gmail.com/)
- **x86: 添加 target("80387") 函数属性**    [原文](https://github.com/gcc-mirror/gcc/commit/38e8115dd2bfaa05146f8d085106189f46c25f52)
- **PATCH: x86：在设置FLAGS寄存器的基本块之前放置TLS调用**    [原文](https://inbox.sourceware.org/gcc-patches/20250817004804.3710369-1-hjl.tools@gmail.com/)
- **GCC 编译器 MAINTAINERS 文件更新**    [原文](https://github.com/gcc-mirror/gcc/commit/b42c5ee445f6de5a2a0b4f9ab16dc19c3c6c615b)
- **GCC 编译器中无名未命名枚举的链接更改实现**    [原文](https://github.com/gcc-mirror/gcc/commit/7921bb4afcb7a3be8e10e63b10acfc2bfa477cae)
- **Fortran: 设置 DECL_TLS_MODEL 在变量完全处理后**    [原文](https://github.com/gcc-mirror/gcc/commit/2e567a06555ac92105e6264fc219a2d5131e1b4e)
- **C++: 解决因无效类型约束导致的内部编译器错误（ICE）**    [原文](https://inbox.sourceware.org/gcc-patches/CAD+gk=hBM+j_ffw3E+2Fpm3JvvWBLsSrOhViNjXXoqLdF5UbxA@mail.gmail.com/)
- **PATCH: 修改布尔加载指令以处理未定义情况**    [原文](https://inbox.sourceware.org/gcc-patches/20250816173252.957313-1-andrew.pinski@oss.qualcomm.com/)
- **Re: [PATCH] C++：为P1766R1中的defarg部分添加测试用例 [PR121552]**    [原文](https://inbox.sourceware.org/gcc-patches/61bd26fc-5ce9-411a-b9b9-576ba0849418@redhat.com/)
- **R: [PATCH v2 1/3] AArch64：支持svbool_t类型上的C/C++操作**    [原文](https://inbox.sourceware.org/gcc-patches/55f55046-c71f-44b7-ae7a-4dd43526e0c8@redhat.com/)
- **Re: [PATCH v2] c++：实现P2115R0无名未命名枚举的链接变化**    [原文](https://inbox.sourceware.org/gcc-patches/5186a8f9-6fc5-481b-84fc-76d84038adec@redhat.com/)
- **Re: [PATCH] c++：添加P1766R1中defarg部分的测试用例**    [原文](https://inbox.sourceware.org/gcc-patches/b6aea1c7-6712-44a3-a6ed-ad6e1d2d3ae5@redhat.com/)
- **PATCH: 提升在预编译头文件包含前定义宏的位置分配**    [原文](https://inbox.sourceware.org/gcc-patches/CAA_5UQ4Rr1Bd8nTXyFvsLDA=REiDZuLRTmrV76y3DJBhh3TW+Q@mail.gmail.com/)
- **关于改进vx结合模式的修补程序**    [原文](https://inbox.sourceware.org/gcc-patches/CA+yXCZCPMeNk6Mx_f2Pmah4YVXL-Zi4zUVow57GNCQBpffzQBg@mail.gmail.com/)
- **ira: tie output allocnos for fused instruction pairs**    [原文](https://inbox.sourceware.org/gcc-patches/aKBaYYrbBSrKJnKZ@homesrv1/)
- **MAINTAINERS: 添加本人审核后添加为GCC项目的维护者**    [原文](https://inbox.sourceware.org/gcc-patches/20250816091715.1374740-2-mikpelinux@gmail.com/)
- **GCC 编译器更新**    [原文](https://github.com/gcc-mirror/gcc/commit/5529a1d36f25ca244076cc1d59061b1443f471a5)
- **实现 __builtin_structured_binding_size 特性**    [原文](https://github.com/gcc-mirror/gcc/commit/9a8b436b005b56e5ec3d8274284ae3afb4e7ba72)
- **为P1766R1的defarg部分添加测试用例 [PR121552]**    [原文](https://github.com/gcc-mirror/gcc/commit/91b5fc4ae2e5c8693cc0b619562f15f90c0fdfaa)
- **C++20 P1766R1 - 缓解小模块的小毛病**    [原文](https://github.com/gcc-mirror/gcc/commit/828c48f0680e209e96bcb76a232665ed047e92cc)
- **Fix default argument parsing in non-comma variadic methods**    [原文](https://github.com/gcc-mirror/gcc/commit/4bed19cf6170541ff757ee1b21d9fec9eb0c6541)
- **GCC 编译器：remaining cpp.predefined macros 的 #undef/#define 操作警告机制**    [原文](https://github.com/gcc-mirror/gcc/commit/cdd015c4ddbb1ae71eea1e44654cee5ca29a6c64)
- **Cobol编译器中的结构类型移除**    [原文](https://github.com/gcc-mirror/gcc/commit/87f354ca75361faa2f40b826d632fbc49a082553)
- **RISC-V: 固定 __builtin_round 异常寄存器的溢出**    [原文](https://github.com/gcc-mirror/gcc/commit/f5696e9b1113b0a8e464cabb8cc26c871b1d9289)
- **GCC 编译器中针对计数引用的 .ACCESS_WITH_SIZE 调用条件更改**    [原文](https://github.com/gcc-mirror/gcc/commit/1b34664c6255a7c1802e377be439f0d474dde0bb)

## Swift

- **一个观察另一个视图模型状态的功能（用于MVVM实现）**    [原文](https://forums.swift.org/t/one-feature-observing-state-of-another-for-mvvm-implementation/81680)
- **Swift 编译器因泛型和缺少实现而崩溃**    [原文](https://forums.swift.org/t/swift-compiler-crashes-by-generics-missing-conformance/81677)
- **如何思考 '@concurrent' 和函数转换**    [原文](https://forums.swift.org/t/how-to-think-about-concurrent-and-function-conversions/81676)
- **Swift 中 Equatable 协议的主作用域隔离问题**    [原文](https://forums.swift.org/t/insight-needed-for-equatable-with-default-mainactor-isolation/81675)
- **NotificationCenter.default.messages() & AsyncAlgorithms 冲突**    [原文](https://forums.swift.org/t/notificationcenter-default-messages-asyncalgorithms-collide/81674)
- **SourceKit-LSP在Build Server Protocol下的瓶颈**    [原文](https://forums.swift.org/t/any-advice-for-a-sourcekit-lsp-bottleneck-using-the-build-server-protocol/81673)
- **Swift 的泛型和协议困惑**    [原文](https://forums.swift.org/t/my-frustration-with-generics-and-protocols/81668)
- **支持Span在包中的使用**    [原文](https://forums.swift.org/t/supporting-span-in-packages/81667)
- **SwiftAI — 任何LLM的一键式API**    [原文](https://forums.swift.org/t/swiftai-one-api-for-any-llm/81666)
- **RFC：Swift 测试中的附件生命周期**    [原文](https://forums.swift.org/t/rfc-attachment-lifetimes/81665)
- **模型消息使用除 Array 外的集合类型**    [原文](https://forums.swift.org/t/model-messages-using-collection-types-other-than-array/81660)
- **Swift 6 模式下的KeyPath推断和可发送性问题**    [原文](https://forums.swift.org/t/sendable-static-keypaths/81657)
- **Swift 1.1 发布说明**    [原文](https://forums.swift.org/t/1-1-release-thread/81649)
- **流式传输，寻求反馈**    [原文](https://forums.swift.org/t/streaming-looking-for-feedback/81648)
- **Swift中动态/运行时类生成API的可行性探讨**    [原文](https://forums.swift.org/t/feasibility-of-runtime-class-generation-api-for-swift/81646)
- **支持Swift集合库中的段树实现**    [原文](https://forums.swift.org/t/supporting-segment-tree-implementation-for-swift-collections/81643)
- **多代理工作流**    [原文](https://forums.swift.org/t/multi-agent-workflows/81642)
- **关于Redirect指令的问题**    [原文](https://forums.swift.org/t/question-about-the-redirect-directive/81637)
- **SwiftAgent - 一个基于FoundationModels API的Swift原生代理SDK**    [原文](https://forums.swift.org/t/swiftagent-a-swift-native-agent-sdk-inspired-by-foundationmodels-and-using-its-tools/81634)
- **Swift 编程者求助**    [原文](https://forums.swift.org/t/contribution-in-swift/81633)
- **本地构建的Swift编译器在未显式传递-sdk标志时无法找到stdlib**    [原文](https://forums.swift.org/t/help-locally-built-compiler-cannot-locate-stdlib-without-explicitly-passing-the-sdk-flag/81630)
- **DocC的Swift工具版本更新计划**    [原文](https://forums.swift.org/t/plans-to-update-doccs-swift-tools-version/81629)
- **Swift 编译器问题：'xxxx' 和 'any Sendable' 是否等价**    [原文](https://forums.swift.org/t/requires-the-types-xxxx-and-any-sendable-be-equivalent/81628)
- **Apache Flink 的 Swift Java 支持讨论**    [原文](https://forums.swift.org/t/apache-flink-with-swift-java-support/81625)
- **Streamline - Swift 的网络框架**    [原文](https://forums.swift.org/t/streamline-swift-networking-framework/81622)
- **任务或分离任务或DispatchQueue**    [原文](https://forums.swift.org/t/task-or-detached-task-or-dispatchqueue/81619)
- **Pitch: Swift系统中的Stat类型提案**    [原文](https://forums.swift.org/t/pitch-stat-types-for-swift-system/81616)
- **JSON 中混合日期格式的处理**    [原文](https://forums.swift.org/t/a-mixture-of-date-formats-in-json/81613)
- **优化控制和优化提示**    [原文](https://forums.swift.org/t/optimization-controls-and-optimization-hints/81612)
- **Swift 6.1中泛型行为异常**    [原文](https://forums.swift.org/t/strange-behaviour-in-the-generics-in-swift-6-1/81605)

## Rust

- **代码块扩展功能提案**    [原文](https://forums.swift.org/t/rfc-proposal-for-extended-features-on-code-blocks/81623)

## Cranelift/Wasmtime

- **Wasmtime 35 引入AArch64 支持，Winch 作为基准编译器**    [原文](https://bytecodealliance.org/articles/winch-aarch64-support)