# 编译器周报 2025-08-11 ~ 2025-08-18

## 本周综述

最近的一系列更新涵盖了多个编译器工具链的关键领域，从GCC到LLVM项目。这些改进不仅增强了编译器在特定架构上的性能和兼容性，还提升了代码生成的准确性和效率。

首先，在GCC 15中针对AArch64架构所做的优化尤为突出。它解决了构建谓词时出现的模式不匹配问题[PR121118]，这主要是通过修复AArch64 SVE指令集在组合谓词时的问题来实现的。这一修复为使用SVE向量扩展的应用提供了更稳定和可靠的编译支持。

接着，MLIR项目中修复了一个SCF验证器崩溃问题，其原因在于对空操作数值进行解引用[PR81358]。这个修复有助于提高MLIR在执行静态循环折叠时的稳定性，避免了潜在的程序终止错误。

另一个值得注意的是libatomic自动链接功能的引入，它使得编译过程更加自动化和标准化，但在某些架构上可能需要进一步关注其兼容性和构建行为[PR97497]。此外，GCC还修复了对部分寄存器破坏的处理问题，提高了编译准确性，并通过补丁解决了gcc中的gcse传递对部分寄存器污染的不一致性。

除了上述显著改进外，LLVM项目中也有不少小规模的优化和修复被提交，尽管它们在行为或性能上没有显著的变化。特别地，在RISC-V架构下，LLVM添加了SpacemiT XSMTVDot向量点积操作扩展，这将有助于提升基于RISC-V处理器的设备上的机器学习和其他计算密集型应用的执行效率。

展望未来，随着这些改进逐步集成到编译器工具链中，开发者们将能够享受到更稳定、高效的编译过程。同时，在处理特定架构和指令集时也将会得到更加优化的支持，这不仅有利于性能提升，也为开发人员提供了更大的灵活性和创新空间。

## 封面 Top

- **[GCC 15] aarch64: 解决构建谓词时的模式不匹配问题 [PR121118]**  修复了AArch64 SVE指令集在组合谓词时的模式不匹配问题。  [原文](https://inbox.sourceware.org/gcc-patches/VI1PR08MB5325CFEB1A38EF036F519632FF31A@VI1PR08MB5325.eurprd08.prod.outlook.com/)
- **[MLIR] 修复SCF验证器崩溃**  由于对空操作数值的解引用导致MLIR SCF验证器崩溃的修复  [原文](https://github.com/llvm/llvm-project/commit/cfe5975eaf0adf333c8210925318a7a43b1750de)
- **PR81358：启用libatomic的自动链接**  GCC中的libatomic自动链接引入了某些架构上的构建关注。  [原文](https://inbox.sourceware.org/gcc-patches/IA1PR12MB9031FA41EB596FB042CE2F80CE31A@IA1PR12MB9031.namprd12.prod.outlook.com/)
- **修复GCC中对部分寄存器破坏的处理**  修复了GCC对部分寄存器破坏的处理，以提高编译准确性。  [原文](https://github.com/gcc-mirror/gcc/commit/4a56ba8c8ec281ef794a598f64a5707204ca9088)
- **[PATCH] gcse：修复对部分寄存器污染的处理 [PR97497]**  补丁解决了GCC中的gcse传递对部分寄存器污染的不一致性。  [原文](https://inbox.sourceware.org/gcc-patches/mpttt25qahd.fsf@arm.com/)
- **LLVM项目：近期提交的代码集群**  LLVM项目中的一些小修复和优化，没有显著的行为或性能变化。  [原文](https://github.com/llvm/llvm-project/commit/c99cbc880fb2bfa6dbddd8eedf42d63c32081cc0)
- **[RISCV] 添加SpacemiT XSMTVDot（向量点积）扩展**  在LLVM中为RISC-V添加SpacemiT XSMTVDot向量点积操作。  [原文](https://github.com/llvm/llvm-project/commit/6842cc556222659256b32883bb2b63ff019100e0)
- **SimplifyCFG 避免在循环头中进行线程处理**  修改SimplifyCFG传递以避免通过循环头进行控制流线程化，保留规范的循环结构。  [原文](https://github.com/llvm/llvm-project/commit/ea2f5395b1acdc6eaf69a79b7660d7fa7d08c271)

## LLVM 专区

- **[MLIR] 修复SCF验证器崩溃**  由于对空操作数值的解引用导致MLIR SCF验证器崩溃的修复  [原文](https://github.com/llvm/llvm-project/commit/cfe5975eaf0adf333c8210925318a7a43b1750de)
- **LLVM项目：近期提交的代码集群**  LLVM项目中的一些小修复和优化，没有显著的行为或性能变化。  [原文](https://github.com/llvm/llvm-project/commit/c99cbc880fb2bfa6dbddd8eedf42d63c32081cc0)
- **[RISCV] 添加SpacemiT XSMTVDot（向量点积）扩展**  在LLVM中为RISC-V添加SpacemiT XSMTVDot向量点积操作。  [原文](https://github.com/llvm/llvm-project/commit/6842cc556222659256b32883bb2b63ff019100e0)
- **SimplifyCFG 避免在循环头中进行线程处理**  修改SimplifyCFG传递以避免通过循环头进行控制流线程化，保留规范的循环结构。  [原文](https://github.com/llvm/llvm-project/commit/ea2f5395b1acdc6eaf69a79b7660d7fa7d08c271)
- **LLVM项目变更的集群摘要**  集群包括对AVX512VLBW内置函数进行的小范围重构和增强测试覆盖，没有功能变更。  [原文](https://github.com/llvm/llvm-project/commit/169b43d4b802a5effbaa715c203e4d0ba85d7b89)
- **[LoongArch] 在启用代码放松时减少保留的重定位数量**  优化 LoongArchAsmBackend，在启用代码放松时减少不必要的重定位。  [原文](https://github.com/llvm/llvm-project/commit/76fb1619f096d91a7ce231d9cc446b1a4454b3cf)
- **[MLIR] 添加 Egress 方言维护者**  该提交为 MLIR egress 及相关方言添加了维护者。  [原文](https://github.com/llvm/llvm-project/commit/51b5a3e1a6deee76332c3d3db916b7fec89fe2f2)
- **改进 __builtin_{,dynamic_}object_size 实现**  在不改变 ABI 或性能的情况下，改善 Clang 的 ASTContext 中的对象大小计算。  [原文](https://github.com/llvm/llvm-project/commit/0d05c42b6ac48c73c8fb90011b62d3f856aadf0d)
- **编译器问题及改进**  Clang和GCC针对LoongArch的编译器修复和改进。  [原文](https://github.com/llvm/llvm-project/commit/bcab8ac126c0b4c439caa3104d66d33d0f70f86f)
- **[MLIR] 重构walkAndApplyPatterns驱动以移除递归**  对MLIR的walkAndApplyPatterns驱动进行了重构以移除递归，改进了内部结构并可能提升了性能。  [原文](https://github.com/llvm/llvm-project/commit/16aa283344d3fec9467e6adb7ea511c0a88afacc)
- **[clang-tidy] 增加了检查 'misc-override-with-different-visibility'**  新的 clang-tidy 检查可检测具有不同可见性的被重写的方法。  [原文](https://github.com/llvm/llvm-project/commit/a0f325bd41c931e4584feeb592987338c5b67d80)
- **[MLIR] 在贪心重写器应用模式前删除不可达块**  改进了MLIR对不可达代码的处理，以防止崩溃和无限循环。  [原文](https://github.com/llvm/llvm-project/commit/87e6fd161a6a2557452a5d4726e4ad184c413917)
- **[OpenMP][Test][NFC] 将输出工具数据以十六进制格式输出，提高可读性**  在不改变行为的情况下改进OpenMP测试案例输出数据格式的可读性。  [原文](https://github.com/llvm/llvm-project/commit/98dd1888bf0eaaece86c9d3ae4beeb089e7a2ea7)
- **[Clang][X86] 添加对 avx512 __builtin_ia32_select* 的 constexpr 处理**  为AVX-512向量选择内置函数添加constexpr属性以实现更好的优化。  [原文](https://github.com/llvm/llvm-project/commit/ce5276f61caa39e5b62af9ff717c6e92eefab2bb)
- **移除不必要的getPointerTy调用**  移除LLVM DAG中的多余getPointerTy调用，使代码更简洁。  [原文](https://github.com/llvm/llvm-project/commit/53e9d3247ef228b62331daa7ac7688d00e200050)
- **AArch64：移除SIMDLongThreeVectorTiedBHSabal表生成类**  移除与AArch64 SIMD指令相关的表生成类，对外部行为无明显影响。  [原文](https://github.com/llvm/llvm-project/commit/8f9852920930f35d1fd6c60676af662f724e86b2)
- **[mlir][emitc] 如何为结构体内的数组成员赋值**  关于MLIR的EmitC方言在为结构体内的数组成员赋值时所受限制的讨论。  [原文](https://discourse.llvm.org/t/mlir-emitc-how-to-assign-value-for-array-member-in-struct/87967)
- **MLIR 文档修复**  MLIR 代码块中的微小文档修复  [原文](https://github.com/llvm/llvm-project/commit/a66d8f62e6a6e64c77322533e4f6f2a2a5884aa2)
- **[clang-tidy][NFC] 删除 clang-tidy 脚本中的 py2 条件**  从 clang-tidy 脚本中删除 Python 2 兼容性代码。  [原文](https://github.com/llvm/llvm-project/commit/66a2d1b7580aab8ac2c171647c39fd85fe711013)
- **clang-tidy针对cppcoreguidelines-prefer-member-initializer假阳性问题的修复**  修复了clang-tidy中关于继承成员初始化的假阳性警告。  [原文](https://github.com/llvm/llvm-project/commit/326d749a368a842e71fd0d4cd7bb97c6d9f52f3e)
- **[clang-tidy] 避免匹配系统头文件中的节点**  针对 clang-tidy 的补丁避免匹配系统头文件内的 AST 节点。  [原文](https://github.com/llvm/llvm-project/commit/bd77e9acf0e86a46379e1780dd58a787a7ee78f5)
- **处理等于条件中的截断 u1 条件**    [原文](https://github.com/llvm/llvm-project/commit/5ae8a9b8cee3d4477fdec107a3ab29b633ec4f9f)
- **修复 clang 中非指针类型的伪析构函数调用**  修复 Clang 编译器中的非指针类型上的伪析构函数调用。  [原文](https://github.com/llvm/llvm-project/commit/e44784fb44bd00acc0ecd25537a359c3a1df8f17)
- **[TableGen][DecoderEmitter] 提升冲突信息的输出**    [原文](https://github.com/llvm/llvm-project/commit/ea4325f174baca7d12e128db4f9f3b41a918da67)
- **[TableGen] Make a function static (NFC)**    [原文](https://github.com/llvm/llvm-project/commit/05f1673e7569da0762d2a5d890ca4860760dad34)
- **TableGen[DecoderEmitter] 输出早期冲突**    [原文](https://github.com/llvm/llvm-project/commit/05827e7ccb4e1295648e38b11ebdbb8fd817177b)
- **clang: 修改OMPClauseProfiler方法名中的拼写错误**    [原文](https://github.com/llvm/llvm-project/commit/3d83dbb73610c6cfb1b67252bd2d519a0aa5e308)
- **[TableGen][DecoderEmitter] 缩短 Filters 向量的生命周期至 NFC (NFC)**    [原文](https://github.com/llvm/llvm-project/commit/fc6024d8959cdb82e5421787882288e26ee728bc)
- **clang-format更新OneLineFormatOffRegex选项，修正getcpu标准及增强CI日志统计功能**    [原文](https://github.com/llvm/llvm-project/commit/ee51f35993d9623563551f9bb9521824992967b6)
- **libc++ flat_set 缺少特性宏**    [原文](https://github.com/llvm/llvm-project/commit/f3008c11406440959f6fc2120dd2117df6fa11ce)
- **RISC-V: 添加 missed DONE 以解决 vx 结合模式 [NFC]**    [原文](https://github.com/gcc-mirror/gcc/commit/756f771f58f79406a08b6d574939b70d895bb613)
- **[M68k] 为PCD寻址模式添加anyext模式**  在M68k的任何扩展操作中添加PCD寻址模式，并增加新的测试用例。  [原文](https://github.com/llvm/llvm-project/commit/bc3754de0aed44147e64b99414ecb06f84ab1a91)
- **移除对llvm-project-tests.yml的调用到spirv-tests.yml**    [原文](https://github.com/llvm/llvm-project/commit/1f5047e43092f39a60a0ddba921610c2ab00897e)
- **移除declareCommon函数中的未使用参数IsTarget**    [原文](https://github.com/llvm/llvm-project/commit/2cedb286b8a37a3c6f09ac394b5e95413baac287)
- **MCSymbol: 移除AMDGPU特有的Kind::TargetCommon并重命名SymContents为kind**    [原文](https://github.com/llvm/llvm-project/commit/aa96e20dcefa7d73229c98a7d2727696ff949459)
- **TableGen[解码发射器] 添加工作于范围的帮助者（NFC）**    [原文](https://github.com/llvm/llvm-project/commit/7bb73455f76c8ce3b470fb931daa68a33ec79c34)
- **为 #153946 添加测试**    [原文](https://github.com/llvm/llvm-project/commit/73775a0f2749d0cc8b8877bf34ebb3534a2e7913)
- **关于MLIR中更丰富的TableGen描述的调查**  关于通过更丰富的TableGen描述在MLIR中提升编译器和开发者工具有潜力增强的调查。  [原文](https://discourse.llvm.org/t/survey-interested-in-discussing-richer-tablegen-descriptions-in-mlir/87959)
- **[clang][test] Clang 调试信息测试的位置**  讨论了将 Clang 调试信息测试集中在一个特定目录中以更易于管理的问题。  [原文](https://discourse.llvm.org/t/clang-test-location-of-clang-debug-info-tests/87958)
- **启动NVGPU方言集成测试的问题**  启动NVGPU方言集成测试时遇到问题，标记为不支持并出现python脚本错误。  [原文](https://discourse.llvm.org/t/how-to-start-the-integrated-test-of-nvgpu-dialect/87950)
- **Clang-tidy misc-use-anonymous-namespace**    [原文](https://discourse.llvm.org/t/clang-tidy-misc-use-anonymous-namespace/87947)
- **LLVM 21.1.0-rc3 发布**    [原文](https://github.com/llvm/llvm-project/releases/tag/llvmorg-21.1.0-rc3)
- **调试PDL模式匹配**  讨论在LLVM中进行PDL模式匹配调试面临的挑战和潜在改善措施。  [原文](https://discourse.llvm.org/t/how-to-debug-pdl-pattern-matching/87940)
- **在MILR中切换全量与部分方言转换的设计模式**  寻求在MILR中实现一个用于切换全量与部分方言转换的标志的最佳实践。  [原文](https://discourse.llvm.org/t/best-design-pattern-for-toggle-full-vs-partial-dialect-conversion-in-milr/87926)
- **Clang vs GCC ffp-contract 默认值对基准测试的影响**    [原文](https://discourse.llvm.org/t/impact-of-ffp-contract-defaults-on-benchmarking/87906)
- **传递 -fsanitize-trap=<...> 而未关联 -fsanitize=<...> 时发出警告**    [原文](https://discourse.llvm.org/t/rfc-emit-a-warning-when-fsanitize-trap-is-passed-without-associated-fsanitize/87893)
- **RISC-V LLVM 同步会议更新**    [原文](https://discourse.llvm.org/t/risc-v-llvm-sync-up-call-august-14th-2025/87891)
- **RFC: 支持cheriot目标三元组作为riscv32子架构**    [原文](https://discourse.llvm.org/t/rfc-support-cheriot-target-triple-as-subarchitecture-of-riscv32/87883)
- **[RFC] 扩展内存效果并通过新MemInit效果改进循环不变代码移动**  通过引入新的MemInit效果在LLVM中扩展内存效果以实现更好的循环不变代码移动的提案。  [原文](https://discourse.llvm.org/t/rfc-extending-memory-effects-and-improving-loop-invariant-code-motion-via-a-new-meminit-effect/87873)
- **PSA：Python 绑定中的自动位置推断**  LLVM 的 Python 绑定中新增了自动位置推断功能，初始状态下是禁用的，但可以启用以增强调试能力。  [原文](https://discourse.llvm.org/t/psa-automatic-location-inference-in-python/87871)
- **线程安全分析与std::weak_ptr**    [原文](https://discourse.llvm.org/t/thread-safety-analysis-and-std-weak-ptr/87864)
- **即将到来的工作会议安排**    [原文](https://discourse.llvm.org/t/my-upcoming-availability/87851)
- **LLVM 21.1.0-rc3 发布**    [原文](https://discourse.llvm.org/t/llvm-21-1-0-rc3-released/87826)
- **错误：方言 'xxx' 没有提供类型解析钩子**  LLVM 方言中处理类型解析钩子的错误。  [原文](https://discourse.llvm.org/t/error-dialect-xxx-provides-no-type-parsing-hook/87825)
- **LLVM Bundle 最终化以确保安全**  为安全目的，确保在 LLVM 中自定义指令序列保持完整。  [原文](https://discourse.llvm.org/t/does-calling-finalizebundle-in-a-custom-inserter-keep-an-instruction-sequence-intact-and-bypass-pre-ra-transforms/87822)
- **使用GOTPCREL重新定位项处理personality和typeinfo eh_frame引用**    [原文](https://discourse.llvm.org/t/using-gotpcrel-relocations-for-personality-and-typeinfo-eh-frame-references/87820)
- **LLVM 周报 #606（2025年8月11日）**    [原文](https://llvmweekly.org/issue/606)

## GCC

- **[GCC 15] aarch64: 解决构建谓词时的模式不匹配问题 [PR121118]**  修复了AArch64 SVE指令集在组合谓词时的模式不匹配问题。  [原文](https://inbox.sourceware.org/gcc-patches/VI1PR08MB5325CFEB1A38EF036F519632FF31A@VI1PR08MB5325.eurprd08.prod.outlook.com/)
- **PR81358：启用libatomic的自动链接**  GCC中的libatomic自动链接引入了某些架构上的构建关注。  [原文](https://inbox.sourceware.org/gcc-patches/IA1PR12MB9031FA41EB596FB042CE2F80CE31A@IA1PR12MB9031.namprd12.prod.outlook.com/)
- **修复GCC中对部分寄存器破坏的处理**  修复了GCC对部分寄存器破坏的处理，以提高编译准确性。  [原文](https://github.com/gcc-mirror/gcc/commit/4a56ba8c8ec281ef794a598f64a5707204ca9088)
- **[PATCH] gcse：修复对部分寄存器污染的处理 [PR97497]**  补丁解决了GCC中的gcse传递对部分寄存器污染的不一致性。  [原文](https://inbox.sourceware.org/gcc-patches/mpttt25qahd.fsf@arm.com/)
- **libstdc++: 为范围算法添加nodiscard属性 [PR121476]**  补丁在libstdc++中为范围算法添加了[[nodiscard]]属性，提升了代码安全性。  [原文](https://inbox.sourceware.org/gcc-patches/CACb0b4nt33=z0fQTHnP6ep09Y0D7zQCGcdNCgRSeaRt=X_wnqQ@mail.gmail.com/)
- **根据TS 25755实现defer语句**  针对GCC实现TS 25755规定的'defer'关键字功能的补丁集提案。  [原文](https://inbox.sourceware.org/gcc-patches/DC5F3GB0TPR4.1VALKTWTHK9O@vlhl.dev/)
- **libstdc++: 修复插入空范围时的自我元素自赋值**  修复 libstdc++ 中将空范围插入向量时的自我移动赋值问题。  [原文](https://inbox.sourceware.org/gcc-patches/20250818083609.334441-1-tkaminsk@redhat.com/)
- **[PATCH v2] [x86] 启用向量化器中的展开**  在 x86 上为特定操作启用向量化器中的循环展开以提高性能。  [原文](https://inbox.sourceware.org/gcc-patches/CAMZc-bxq443uZsVgbVusMUryRjUiUCi6UQ+xQd7OP8kvwH3bqw@mail.gmail.com/)
- **[RFC 补丁 v2] [AutoFDO] 在GCOV中跟踪源文件名**  GCC补丁，利用GCOV文件名高效地追踪并注解轮廓计数。  [原文](https://inbox.sourceware.org/gcc-patches/20250818082546.33686-1-dhruvc@nvidia.com/)
- **[PATCH v2] x86: 将TLS调用置于所有寄存器设置基本块之前**  TLS调用不得先于条件跳转或位于包含活的调用者保存寄存器的块内  [原文](https://inbox.sourceware.org/gcc-patches/20250817205005.678470-1-hjl.tools@gmail.com/)
- **LoongArch：清理原子操作并实现16字节的原子操作**  针对LoongArch的原子操作进行了清理并实现了新的操作，但发现了需要回滚的错误。  [原文](https://inbox.sourceware.org/gcc-patches/c1a65e19519c6782d1bd476f8c644bb2211d89a4.camel@xry111.site/)
- **csky：引用CPU和架构时使用引号**  补丁更新了csky端口以正确引用CPU和架构字符串。  [原文](https://inbox.sourceware.org/gcc-patches/CAJF2gTTvoY1HchFqbKUSmgx6CkZfxpeyhvLnaLy7zVnxfKowtw@mail.gmail.com/)
- **在GCC中实现'defer'关键字**  通过新标志在GCC中增加对'defer'关键字的支持。  [原文](https://inbox.sourceware.org/gcc-patches/20250818015646.24383-5-navi@vlhl.dev/)
- **在GCC中为语句表达式引入跳转屏障**  GCC补丁引入跳转屏障，以更好地控制语句表达式中的局部跳跃。  [原文](https://inbox.sourceware.org/gcc-patches/20250818015646.24383-4-navi@vlhl.dev/)
- **为未来的 defer 语句支持在 push_cleanup 中处理表达式节点**  通过调整 `push_cleanup` 函数，为 GCC 的 C 编译器处理 defer 语句做好准备。  [原文](https://inbox.sourceware.org/gcc-patches/20250818015646.24383-3-navi@vlhl.dev/)
- **添加 D_C2Y 禁用掩码**  在GCC C编译器中为C2Y引入一个新的禁用掩码并调整相关掩码。  [原文](https://inbox.sourceware.org/gcc-patches/20250818015646.24383-2-navi@vlhl.dev/)
- **LoongArch：原子操作增强及16字节原子操作的实现**  LoongArch原子操作处理增强，支持带有SCQ功能的16字节原子操作。  [原文](https://inbox.sourceware.org/gcc-patches/b64c8ae3-00a8-a8d4-7011-f410581204bb@loongson.cn/)
- **LoongArch: Implement 16-byte atomic add, sub, and, or, xor, and nand …**  | 30 | 30 | UNSPEC_ATOMIC_STORE | 31 | 31 | UNSPEC_ATOMIC_LOAD | 32 | 32 | UNSPEC_MEMORY_BARRIER | | 33 | + | | 34 | + UNSPEC_TI_FETCH_ADD | | 35 | + UNSPEC_TI_FETCH_SUB | | 36 | + UNSPEC_TI_FETCH_AND | | 37 | + UNSPEC_TI_FETCH_XOR | | 38 | + UNSPEC_TI_FETCH_OR | | 39 | + UNSPEC_TI_FETCH_NAND_MASK_INVERTED | 33 | 40 | ]) | 34 | 41 | | 35 | 42 | (define_code_iterator any_atomic [plus ior xor and]) | | 323 | 330 | } | 324 | 331 | [(set (attr "length") (const_int 16))]) | 325 | 332 | | | 333 | +(define_mode_iterator ALL_SC [GPR (TI "TARGET_64BIT && ISA_HAS_SCQ")]) | | 334 | +(define_mode_attr _scq [(SI "") (DI "") (TI "_scq")]) | 326 | 335 | (define_expand "atomic_fetch_nand " | 327 | | - [(match_operand:GPR 0 "register_operand") | 328 | | - (match_operand:GPR 1 "memory_operand") | 329 | | - (match_operand:GPR 2 "reg_or_0_operand") | 330 | | - (match_operand:SI 3 "const_int_operand")] | | 336 | + [(match_operand:ALL_SC 0 "register_operand") | | 337 | + (match_operand:ALL_SC 1 "memory_operand") | | 338 | + (match_operand:ALL_SC 2 "reg_or_0_operand") | | 339 | + (match_operand:SI 3 "const_int_operand")] | 331 | 340 | "" | 332 | 341 | { | 333 | 342 | /* ~(atom & mask) = (~mask) | (~atom), so we can hoist | | 339 | 348 | NULL_RTX, false)); | 340 | 349 | | 341 | 350 | emit_insn ( | 342 | | - gen_atomic_fetch_nand_mask_inverted (operands[0], operands[1], | 343 | | - inverted_mask)); | | 351 | + gen_atomic_fetch_nand_mask_inverted <_scq> (operands[0], | | 352 | + operands[1], | | 353 | + inverted_mask)); | 344 | 354 | DONE; | 345 | 355 | }) | 346 | 356 | | | 880 | 890 | DONE; | 881 | 891 | }) | 882 | 892 | | | 893 | +(define_int_iterator UNSPEC_TI_FETCH_DIRECT | | 894 | + [UNSPEC_TI_FETCH_ADD | | 895 | + UNSPEC_TI_FETCH_SUB | | 896 | + UNSPEC_TI_FETCH_AND | | 897 | + UNSPEC_TI_FETCH_XOR | | 898 | + UNSPEC_TI_FETCH_OR]) | | 899 | +(define_int_iterator UNSPEC_TI_FETCH | | 900 | + [UNSPEC_TI_FETCH_DIRECT UNSPEC_TI_FETCH_NAND_MASK_INVERTED]) | | 901 | +(define_int_attr amop_ti_fetch | | 902 | + [(UNSPEC_TI_FETCH_ADD "add") | | 903 | + (UNSPEC_TI_FETCH_SUB "sub") | | 904 | + (UNSPEC_TI_FETCH_AND "and") | | 905 | + (UNSPEC_TI_FETCH_XOR "xor") | | 906 | + (UNSPEC_TI_FETCH_OR "or") | | 907 | + (UNSPEC_TI_FETCH_NAND_MASK_INVERTED "nand_mask_inverted")]) | | 908 | +(define_int_attr size_ti_fetch | | 909 | + [(UNSPEC_TI_FETCH_ADD "36") | | 910 | + (UNSPEC_TI_FETCH_SUB "36") | | 911 | + (UNSPEC_TI_FETCH_AND "28") | | 912 | + (UNSPEC_TI_FETCH_XOR "28") | | 913 | + (UNSPEC_TI_FETCH_OR "28") | | 914 | + (UNSPEC_TI_FETCH_NAND_MASK_INVERTED "28")]) | | 915 | + | | 916 | +(define_insn "atomic_fetch_ ti_scq" | | 917 | + [(set (match_operand:TI 0 "register_operand" "=&r") | | 918 | + (match_operand:TI 1 "memory_operand" "+ZB")) | | 919 | + (set (match_dup 1) | | 920 | + (unspec_volatile:TI | | 921 | + [(match_dup 0) | | 922 | + (match_operand:TI 2 "reg_or_0_operand" "rJ")] | | 923 | + UNSPEC_TI_FETCH)) | | 924 | + (clobber (match_scratch:DI 3 "=&r")) | | 925 | + (clobber (match_scratch:DI 4 "=&r"))] | | 926 | + "TARGET_64BIT && ISA_HAS_SCQ" | | 927 | +{ | | 928 | + output_asm_insn ("1:", operands); | | 929 | + output_asm_insn ("ll  [原文](https://github.com/gcc-mirror/gcc/commit/534276f1e5889f2ce5b5238e68b395a92a79761b)
- **LoongArch 原子获取 NAND 实现**  在 LoongArch 中增加了对 atomic_fetch_nand 操作的支持。  [原文](https://github.com/gcc-mirror/gcc/commit/c9374dbf9d16b35886711a91993bcdec490722e7)
- **LoongArch 编译器对原子操作的修复**  在 LoongArch 中禁用了 atomic_fetch_sub 扩展，以确保与 -mlam-bh 标志的正确操作。  [原文](https://github.com/gcc-mirror/gcc/commit/6d67bbce340351cfe7f30f1b17cba7635f18c8d5)
- **LoongArch 编译器优化和重构**  GCC LoongArch 改进集中在通过少量更改实现优化和代码清晰。  [原文](https://github.com/gcc-mirror/gcc/commit/1f1ab36058abc80c306ad022540df1c4f835612f)
- **LoongArch：移除LL-SC循环后的多余指令**  删除了多余的'b 3f'指令并更新了LoongArch的操作数打印逻辑。  [原文](https://github.com/gcc-mirror/gcc/commit/2ac0e38a3099b6422199553ae29b8b333bb9f5e7)
- **LoongArch：不要为LL-SC循环发出过于严格的屏障**  通过优化LoongArch上的屏障发射来提高LL-SC循环的性能。  [原文](https://github.com/gcc-mirror/gcc/commit/9b55cd0405609474aab6fdd0c621fd738af5800a)
- **LoongArch 编译器更新**  LoongArch GCC 的非功能性变更，将 'amo' 替换为尺寸规范。  [原文](https://github.com/gcc-mirror/gcc/commit/b8e147d46ea5e78be0a390e645600afc4cbae645)
- **LoongArch：允许在原子操作中使用bstrins进行地址屏蔽**  在LoongArch上启用原子操作中的'bstrins'指令以实现地址屏蔽，增强未来兼容性。  [原文](https://github.com/gcc-mirror/gcc/commit/91f00a75536a553b5f95ea80694d655c5ddf34af)
- **GCC 目标测试的每日更新：针对 MIPS 和 RISC-V**  提交增强了 GCC 中针对 MIPS 和 RISC-V 架构的测试覆盖率，没有改变行为。  [原文](https://github.com/gcc-mirror/gcc/commit/0f9ce736b8de5ff184a17555a9b89603b24e0ac8)
- **x86：在所有设置FLAGS_REG的基本块之前放置TLS调用**  调整x86基本块中TLS调用的位置以避免破坏标志。  [原文](https://inbox.sourceware.org/gcc-patches/CAMe9rOqket6t_16dZKC5GqbvBTScEb0iVRHiy1KCK5eeZ-gFBQ@mail.gmail.com/)
- **避免 amoswap 中不必要的常量加载**  修复了 RISC-V 原子交换循环中不必要的常量加载，提高了效率而没有功能变化。  [原文](https://github.com/gcc-mirror/gcc/commit/6f63044a7ae63a276a4f6d3108849e093c690bc6)
- **针对修复测试和添加-mgrow-frame-downwards标志的MIPS编译器补丁**  一系列用于MIPS编译器测试改进和功能增强的补丁。  [原文](https://inbox.sourceware.org/gcc-patches/9fe9764f-6ba4-4790-9015-ba467aaed51f@gmail.com/)
- **维护者脚本排序和文档更新**  为了与 check-MAINTAINERS.py 的排序机制对齐，更新 MAINTAINERS 文档。  [原文](https://inbox.sourceware.org/gcc-patches/aKG2w6dK1wMB85oV@localhost.localdomain/)
- **兴趣设置喷洒产品**    [原文](https://inbox.sourceware.org/gcc-patches/5ae86caa.5e0.198b673b7bb.Coremail.bessiex@vip.163.com/)
- **[补丁] testsuite: 修复 PR108080 测试用例对于某些目标 [PR121396]**    [原文](https://inbox.sourceware.org/gcc-patches/aKFI6Rs9TJ738ig-@Thaum.localdomain/)
- **[PATCH 2/3] ira: 紧耦合融合指令对的输出分配序号**    [原文](https://inbox.sourceware.org/gcc-patches/e685c33c-9539-417f-b5c2-8b0ee979aa74@gmail.com/)
- **IRA: 将融合指令对的目标分配码绑定在一起**    [原文](https://github.com/gcc-mirror/gcc/commit/07a0baa7609a5a78d8b4a3c17897768fb2119605)
- **RISC-V 编译器漏洞修复：扩展条件块匹配**    [原文](https://github.com/gcc-mirror/gcc/commit/14b15a9a473fc69b0251e625c397e70c396f0c0c)
- **RISC-V: 固件匹配修复**    [原文](https://inbox.sourceware.org/gcc-patches/0c26667e-f5eb-4ab9-a4a6-8428ea598055@gmail.com/)
- **x86: 添加 target("80387") 函数属性**  您使用另一个标签页或窗口登录了  [原文](https://github.com/gcc-mirror/gcc/commit/38e8115dd2bfaa05146f8d085106189f46c25f52)
- **[PATCH] x86: 在所有设置FLAGS_REG的基本块之前放置TLS调用**  修改TLS调用的位置以避免与标志寄存器和条件跳转发生冲突。  [原文](https://inbox.sourceware.org/gcc-patches/20250817004804.3710369-1-hjl.tools@gmail.com/)
- **GCC 编译器 MAINTAINERS 文件更新**    [原文](https://github.com/gcc-mirror/gcc/commit/b42c5ee445f6de5a2a0b4f9ab16dc19c3c6c615b)
- **GCC 编译器中无名未命名枚举的链接更改实现**    [原文](https://github.com/gcc-mirror/gcc/commit/7921bb4afcb7a3be8e10e63b10acfc2bfa477cae)
- **Fortran: 设置 DECL_TLS_MODEL 在变量完全处理后**    [原文](https://github.com/gcc-mirror/gcc/commit/2e567a06555ac92105e6264fc219a2d5131e1b4e)
- **C++: 解决因无效类型约束导致的内部编译器错误（ICE）**    [原文](https://inbox.sourceware.org/gcc-patches/CAD+gk=hBM+j_ffw3E+2Fpm3JvvWBLsSrOhViNjXXoqLdF5UbxA@mail.gmail.com/)
- **PATCH: 修改布尔加载指令以处理未定义情况**    [原文](https://inbox.sourceware.org/gcc-patches/20250816173252.957313-1-andrew.pinski@oss.qualcomm.com/)
- **Re: [PATCH] C++：为P1766R1中的defarg部分添加测试用例 [PR121552]**    [原文](https://inbox.sourceware.org/gcc-patches/61bd26fc-5ce9-411a-b9b9-576ba0849418@redhat.com/)
- **R: [PATCH v2 1/3] AArch64：支持svbool_t类型上的C/C++操作**    [原文](https://inbox.sourceware.org/gcc-patches/55f55046-c71f-44b7-ae7a-4dd43526e0c8@redhat.com/)
- **Re: [PATCH v2] c++：实现P2115R0无名未命名枚举的链接变化**    [原文](https://inbox.sourceware.org/gcc-patches/5186a8f9-6fc5-481b-84fc-76d84038adec@redhat.com/)
- **Re: [PATCH] c++：添加P1766R1中defarg部分的测试用例**    [原文](https://inbox.sourceware.org/gcc-patches/b6aea1c7-6712-44a3-a6ed-ad6e1d2d3ae5@redhat.com/)
- **PATCH: 提升在预编译头文件包含前定义宏的位置分配**    [原文](https://inbox.sourceware.org/gcc-patches/CAA_5UQ4Rr1Bd8nTXyFvsLDA=REiDZuLRTmrV76y3DJBhh3TW+Q@mail.gmail.com/)
- **关于改进vx结合模式的修补程序**    [原文](https://inbox.sourceware.org/gcc-patches/CA+yXCZCPMeNk6Mx_f2Pmah4YVXL-Zi4zUVow57GNCQBpffzQBg@mail.gmail.com/)
- **ira: tie output allocnos for fused instruction pairs**    [原文](https://inbox.sourceware.org/gcc-patches/aKBaYYrbBSrKJnKZ@homesrv1/)
- **MAINTAINERS: 添加本人审核后添加为GCC项目的维护者**    [原文](https://inbox.sourceware.org/gcc-patches/20250816091715.1374740-2-mikpelinux@gmail.com/)
- **GCC 编译器更新**    [原文](https://github.com/gcc-mirror/gcc/commit/5529a1d36f25ca244076cc1d59061b1443f471a5)
- **实现 __builtin_structured_binding_size 特性**    [原文](https://github.com/gcc-mirror/gcc/commit/9a8b436b005b56e5ec3d8274284ae3afb4e7ba72)
- **为P1766R1的defarg部分添加测试用例 [PR121552]**    [原文](https://github.com/gcc-mirror/gcc/commit/91b5fc4ae2e5c8693cc0b619562f15f90c0fdfaa)
- **C++20 P1766R1 实现**  为缓解 GCC 中模块的小问题，实现了 C++20 P1766R1。  [原文](https://github.com/gcc-mirror/gcc/commit/828c48f0680e209e96bcb76a232665ed047e92cc)
- **修复非逗号可变参数方法中默认参数解析**  修复非逗号可变参数方法中默认参数的解析，确保从C++98到C++23行为正确。  [原文](https://github.com/gcc-mirror/gcc/commit/4bed19cf6170541ff757ee1b21d9fec9eb0c6541)
- **GCC 编译器：remaining cpp.predefined macros 的 #undef/#define 操作警告机制**    [原文](https://github.com/gcc-mirror/gcc/commit/cdd015c4ddbb1ae71eea1e44654cee5ca29a6c64)
- **Cobol编译器中的结构类型移除**    [原文](https://github.com/gcc-mirror/gcc/commit/87f354ca75361faa2f40b826d632fbc49a082553)
- **RISC-V: 固定 __builtin_round 异常寄存器的溢出**    [原文](https://github.com/gcc-mirror/gcc/commit/f5696e9b1113b0a8e464cabb8cc26c871b1d9289)
- **GCC 编译器中针对计数引用的 .ACCESS_WITH_SIZE 调用条件更改**    [原文](https://github.com/gcc-mirror/gcc/commit/1b34664c6255a7c1802e377be439f0d474dde0bb)

## Swift

- **使用协议时Peer Macros导致崩溃**  在Swift中，当与协议一起使用时，peer macros会导致运行时崩溃。  [原文](https://forums.swift.org/t/crash-when-using-peer-macros-with-protocols/81690)
- **Swift 编译器对闭包类型检查的诊断**  在对复杂闭包进行类型检查时，Swift 编译器提供无帮助的诊断信息  [原文](https://forums.swift.org/t/swift-compiler-diagnostics-when-typechecking-closures-are-not-good/81683)
- **观察全局状态以实现MVVM**  讨论如何使用TCA在MVVM实现中观察全局状态。  [原文](https://forums.swift.org/t/one-feature-observing-state-of-another-for-mvvm-implementation/81680)
- **由于泛型/缺失一致性导致的Swift编译器崩溃**  由于在Set中使用泛型时缺少Hashable一致性导致Swift编译器崩溃。  [原文](https://forums.swift.org/t/swift-compiler-crashes-by-generics-missing-conformance/81677)
- **理解 `@concurrent` 和函数转换**  澄清Swift中 `@concurrent` 函数类型及其与演员隔离函数交互的行为。  [原文](https://forums.swift.org/t/how-to-think-about-concurrent-and-function-conversions/81676)
- **关于MainActor默认隔离与Equatable协议符合性的洞察**  探索Swift并发上下文中`Equatable`协议符合性与默认MainActor隔离的问题。  [原文](https://forums.swift.org/t/insight-needed-for-equatable-with-default-mainactor-isolation/81675)
- **NotificationCenter.default.messages 与 AsyncAlgorithms 的兼容性问题**  由于 Sendable 要求，NotificationCenter.default.messages 和 AsyncAlgorithms 之间存在不兼容性。  [原文](https://forums.swift.org/t/notificationcenter-default-messages-asyncalgorithms-collide/81674)
- **使用构建服务器协议的SourceKit-LSP瓶颈**  由于构建服务器协议响应时间过长，SourceKit-LSP的阻塞行为影响了工作效率。  [原文](https://forums.swift.org/t/any-advice-for-a-sourcekit-lsp-bottleneck-using-the-build-server-protocol/81673)
- **在Swift中使用泛型和协议的挫败感**  开发人员对Swift中的存在类型和泛型表达了挫败感。  [原文](https://forums.swift.org/t/my-frustration-with-generics-and-protocols/81668)
- **Swift包中支持Span系列类型**  Swift 6.2中的新Span系列类型及其后向部署支持限制要求更新包API。  [原文](https://forums.swift.org/t/supporting-span-in-packages/81667)
- **SwiftAI：任何LLM的统一API**  SwiftAI通过统一的API和可插拔后端简化了在Swift应用中集成LLM功能。  [原文](https://forums.swift.org/t/swiftai-one-api-for-any-llm/81666)
- **RFC：Swift 测试中的附件生命周期**  提出在 Swift 测试中实施条件性附件记录以增强功能和性能。  [原文](https://forums.swift.org/t/rfc-attachment-lifetimes/81665)
- **Swift Protobuf：高效使用 ContiguousArray 和 Set**  关于通过使用 ContiguousArray 和 Set 优化 Swift-protobuf 项目运行时性能的讨论，建议分离 protobuf 结构与内存模型。  [原文](https://forums.swift.org/t/model-messages-using-collection-types-other-than-array/81660)
- **可发送的静态KeyPaths**  在Swift 6中即使有Sendable类型或元类型，也需要显式地标记KeyPaths为Sendable。  [原文](https://forums.swift.org/t/sendable-static-keypaths/81657)
- **1.1 数值版本发布线程**  数值版本1.1的发布包括了浮点算术性能改进和扩展的文档。  [原文](https://forums.swift.org/t/1-1-release-thread/81649)
- **关于流式属性包装器的反馈请求**  Swift中提出的用于异步序列的属性包装器，并征求反馈意见。  [原文](https://forums.swift.org/t/streaming-looking-for-feedback/81648)
- **Swift中运行时类生成API的可行性**  讨论在Swift中实现动态类生成的可能性，目前可以通过现有的运行时支持来实现。  [原文](https://forums.swift.org/t/feasibility-of-runtime-class-generation-api-for-swift/81646)
- **支持Swift集合的段树实现**  提议在Swift集合中支持段树实现。  [原文](https://forums.swift.org/t/supporting-segment-tree-implementation-for-swift-collections/81643)
- **多代理工作流**  Swift论坛上的讨论关于用于多代理工作流的备选框架。  [原文](https://forums.swift.org/t/multi-agent-workflows/81642)
- **关于 @redirected 指令的问题**  澄清 DocC 的 @redirected 指令的限制及其依赖于托管提供者来实现实际的重定向。  [原文](https://forums.swift.org/t/question-about-the-redirect-directive/81637)
- **SwiftAgent - 受FoundationModels启发的Swift原生代理SDK**  SwiftAgent引入了一款受FoundationModels启发的Swift原生SDK，使应用程序更容易地集成AI。  [原文](https://forums.swift.org/t/swiftagent-a-swift-native-agent-sdk-inspired-by-foundationmodels-and-using-its-tools/81634)
- **完成《Swift黑客入门》后的Swift学习路径**  为完成《Swift黑客入门》的新Swift学习者提供的下一步建议。  [原文](https://forums.swift.org/t/contribution-in-swift/81633)
- **使用SDK标志构建本地Swift编译器的问题**  本地构建的Swift编译器需要-sdk标志来找到stdlib。  [原文](https://forums.swift.org/t/help-locally-built-compiler-cannot-locate-stdlib-without-explicitly-passing-the-sdk-flag/81630)
- **更新 DocC 的 swift-tools-version 计划**  更新 DocC 的 swift-tools-version 到 6.1，对依赖项目无影响。  [原文](https://forums.swift.org/t/plans-to-update-doccs-swift-tools-version/81629)
- **Swift 编译器错误和泛型类型要求**  关于使用 Sendable 元素扩展 AsyncStream 的 Swift 泛型澄清。  [原文](https://forums.swift.org/t/requires-the-types-xxxx-and-any-sendable-be-equivalent/81628)
- **Apache Flink 支持 Swift Java**  提议通过合同工作在 Apache Flink 中添加 Swift 支持，专注于利用 Swift Java 和 FFM API 实现高性能。  [原文](https://forums.swift.org/t/apache-flink-with-swift-java-support/81625)
- **Streamline - Swift 网络框架**  开发人员分享了新的 Swift HTTP 客户端包 Streamline，正寻求社区反馈并测试其与 Linux 和服务器上的 Swift 的兼容性。  [原文](https://forums.swift.org/t/streamline-swift-networking-framework/81622)
- **选择在主线程执行任务时使用Task、Detached Task还是DispatchQueue**  关于在Swift中选择Task、Detached Task或DispatchQueue作为执行主线程任务的最佳方法的讨论。  [原文](https://forums.swift.org/t/task-or-detached-task-or-dispatchqueue/81619)
- **在Swift系统中引入Stat类型提案**  提议一种Swift原生的Stat类型以实现更好的文件元数据访问。  [原文](https://forums.swift.org/t/pitch-stat-types-for-swift-system/81616)
- **处理JSON中日期格式的混合问题**  关于Swift中从JSON解析不一致日期格式的讨论，强调了需要定制解决方案的重要性。  [原文](https://forums.swift.org/t/a-mixture-of-date-formats-in-json/81613)
- **优化控制和优化提示**  提议为Swift添加更多优化控件和提示以提高编译器性能的可预测性。  [原文](https://forums.swift.org/t/optimization-controls-and-optimization-hints/81612)
- **Swift 6.1 中泛型的奇怪行为**  Swift 6.1 中与 Swift 5.x 不同的意外泛型行为。  [原文](https://forums.swift.org/t/strange-behaviour-in-the-generics-in-swift-6-1/81605)

## Rust

- **关于在代码块中启用扩展功能的RFC提案**  提议为DocC文档的代码块启用和标注复制到剪贴板的功能。  [原文](https://forums.swift.org/t/rfc-proposal-for-extended-features-on-code-blocks/81623)

## Cranelift/Wasmtime

- **Wasmtime 35：在Winch中引入AArch64支持**  Wasmtime 35引入了Winch对AArch64的支持，扩展了其在编译WebAssembly代码方面的能力。  [原文](https://bytecodealliance.org/articles/winch-aarch64-support)